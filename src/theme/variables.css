/* Typography - Outfit font - must be first */
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;600;700;800;900&display=swap');

/**
 * Zemichat Design System - CSS Variables
 * Based on DESIGN.md specifications
 */

:root {
  /* Background & Foreground */
  --background: 220 50% 7%;
  --foreground: 210 40% 98%;

  /* Card */
  --card: 220 39% 11%;
  --card-foreground: 210 40% 98%;

  /* Popover */
  --popover: 220 39% 11%;
  --popover-foreground: 210 40% 98%;

  /* Primary (Amethyst Purple) */
  --primary: 258 90% 80%;
  --primary-foreground: 220 50% 7%;

  /* Secondary (Mint Green) */
  --secondary: 142 76% 36%;
  --secondary-foreground: 210 40% 98%;

  /* Accent (Mint Green) */
  --accent: 142 76% 36%;
  --accent-foreground: 220 50% 7%;

  /* Muted */
  --muted: 215 16% 47%;
  --muted-foreground: 215 16% 70%;

  /* Border & Input */
  --border: 215 25% 27%;
  --input: 215 25% 27%;
  --ring: 258 90% 80%;

  /* Destructive */
  --destructive: 0 72% 65%;
  --destructive-foreground: 0 0% 100%;

  /* Chat Bubbles */
  --bubble-sent: 258 90% 80%;
  --bubble-sent-foreground: 220 50% 7%;
  --bubble-received: 215 25% 27%;
  --bubble-received-foreground: 210 40% 98%;

  /* Radius */
  --radius: 1.5rem;

  /* Shadows */
  --shadow-soft: 0 4px 20px -4px hsl(0 0% 0% / 0.3);
  --shadow-medium: 0 8px 30px -6px hsl(0 0% 0% / 0.4);
  --shadow-lifted: 0 12px 40px -8px hsl(0 0% 0% / 0.5);

  /* Sidebar */
  --sidebar-width: 16rem;
  --sidebar-width-mobile: 18rem;
  --sidebar-width-icon: 3rem;

  /* Ionic variable overrides â€“ force dark theme regardless of
     device prefers-color-scheme. Without these, Ionic components
     (modals, action sheets, alerts, etc.) fall back to white. */
  --ion-background-color: hsl(220, 50%, 7%);
  --ion-background-color-rgb: 10, 13, 23;
  --ion-text-color: hsl(210, 40%, 98%);
  --ion-text-color-rgb: 243, 244, 246;
  --ion-toolbar-background: hsl(220, 50%, 7%);
  --ion-item-background: hsl(220, 39%, 11%);
  --ion-card-background: hsl(220, 39%, 11%);
  --ion-overlay-background-color: hsl(220, 50%, 7%);
}

* {
  font-family: 'Outfit', 'Manrope', 'Plus Jakarta Sans', system-ui, -apple-system, sans-serif;
}

/* Base dark theme */
html, body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}

/* Safe area padding for mobile */
.safe-bottom {
  padding-bottom: max(1rem, env(safe-area-inset-bottom));
}

.safe-top {
  padding-top: max(1rem, env(safe-area-inset-top));
}

/* Utility classes */
.shadow-soft {
  box-shadow: var(--shadow-soft);
}

.shadow-medium {
  box-shadow: var(--shadow-medium);
}

.shadow-lifted {
  box-shadow: var(--shadow-lifted);
}

/* Button glow effect */
.glow-primary {
  box-shadow: 0 4px 12px rgba(167, 139, 250, 0.3);
}

.glow-primary:hover {
  box-shadow: 0 6px 16px rgba(167, 139, 250, 0.4);
}

/* Ionic overrides for dark theme */
ion-content {
  --background: hsl(var(--background));
  --color: hsl(var(--foreground));
}

ion-page {
  background: hsl(var(--background));
}

ion-header {
  --background: hsl(var(--background));
}

ion-toolbar {
  --background: hsl(var(--background));
  --color: hsl(var(--foreground));
}

ion-input {
  --background: hsl(var(--card)) !important;
  --color: hsl(var(--foreground)) !important;
  --placeholder-color: hsl(var(--muted-foreground)) !important;
  --border-color: hsl(var(--border)) !important;
  --border-radius: 1rem !important;
  --border-width: 1px !important;
  --padding-start: 1rem !important;
  --padding-end: 1rem !important;
  --highlight-color-focused: hsl(var(--primary)) !important;
  background: hsl(var(--card));
}

ion-input .native-input,
ion-input input {
  background: transparent !important;
  color: hsl(var(--foreground)) !important;
}

ion-input .native-input::placeholder,
ion-input input::placeholder {
  color: hsl(var(--muted-foreground)) !important;
  opacity: 1 !important;
}

ion-modal {
  --background: hsl(var(--background));
}

ion-modal ion-toolbar {
  --background: hsl(var(--card));
  --color: hsl(var(--foreground));
}

ion-button {
  --border-radius: 9999px;
  font-weight: 700;
  /* Match host element shape to inner native button to prevent white corner artifacts */
  border-radius: 9999px;
  overflow: hidden;
}

/* Ensure outline buttons also get proper host styling */
ion-button[fill="outline"] {
  --border-color: hsl(var(--border));
  --color: hsl(var(--foreground));
}

ion-checkbox {
  --background: transparent;
  --border-color: hsl(var(--border));
  --checkbox-background-checked: hsl(var(--primary));
  --border-color-checked: hsl(var(--primary));
}

/* Animations */
@keyframes bounce-in {
  0% { opacity: 0; transform: scale(0.9); }
  50% { transform: scale(1.02); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes slide-up {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}

.animate-bounce-in {
  animation: bounce-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* Skeleton shimmer */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton-bone {
  background: linear-gradient(90deg, hsl(var(--card)) 25%, hsl(var(--border)) 50%, hsl(var(--card)) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 0.5rem;
}

/* Fade slide in for list items */
@keyframes fade-slide-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-slide-in {
  animation: fade-slide-in 0.3s ease-out both;
}

/* Gentle float for empty state illustrations */
@keyframes gentle-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* Message send animation */
@keyframes message-send {
  from { opacity: 0; transform: translateY(20px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.message-just-sent {
  animation: message-send 0.3s ease-out;
}

/* Heart double-tap animation */
@keyframes heart-pop {
  0% { opacity: 1; transform: scale(0); }
  50% { transform: scale(1.3); }
  100% { opacity: 0; transform: scale(1); }
}

.heart-anim {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 2rem;
  pointer-events: none;
  animation: heart-pop 0.6s ease-out forwards;
  z-index: 10;
}
